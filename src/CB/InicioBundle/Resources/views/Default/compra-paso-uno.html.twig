{% extends 'InicioBundle::default.html.twig' %}
{% block barraLateral %}
     {% include 'InicioBundle:Default:busqueda.html.twig' %}
{% endblock %}
{% block javascript %}
    <script type="text/javascript">
        $( "#provincias" ).change(function(){
            var provincia = $('#provincias').val();
            $.ajax({
                 dataType: "json",
                 type: "POST",
                 url: "buscarLocalidades",
                 data: { data: provincia}
             })
            .done(function( result ) {
                $('#localidades').children().each(function( index ) {
                    $( this ).remove();
                });
                for (i in result) {
                    var option=document.createElement('option');
                    option.value=result[i].id;
                    var text=document.createTextNode(result[i].nombre);
                    var padre=document.getElementById("localidades");
                    option.appendChild(text);
                    padre.appendChild(option);
                }
            });
        });
        localStorage.clear();
    </script>
{% endblock javascript %}

{% block main %}
<div class="row container">
    <form role="form" >
        <div class="col-md-5 col-md-offset-1">
            <h3>Complete su Direccion</h3>
            <div class="form-group">
                <label for="exampleInputEmail1">Provincia</label>
                <select class="form-control" name="Provincia" id="provincias" required>
                    <option value="" disabled selected>Seleccione una Provincia</option>
                    {% for provincia in provincias %}
                        <option value="{{provincia.id}}">{{provincia.nombre}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group ">
                <label for="exampleInputPassword1">Localidad</label>
                <select class="form-control" id="localidades" name="localidad" required>
                </select>
            </div>
            <div class="form-group">
                <div class="">
                    <label for="exampleInputPassword1">Calle</label>
                    <input type="text" class="form-control" name="calle" placeholder="Calle" required>
                </div>
                <div class="">
                    <label for="exampleInputPassword1">Numero</label>
                    <input type="number" class="form-control" name="numero" placeholder="NÂ°" required>
                </div>
                <div class="">
                    <label for="exampleInputPassword1">Piso</label>
                    <input type="number" class="form-control" name="piso" placeholder="Piso" >
                </div>
                <div class="">
                    <label for="exampleInputPassword1">Departamento</label>
                    <input type="text" class="form-control" name="dpto" placeholder="Dpto">
                </div>           
            </div>
        </div>
        <div class="col-md-5  col-md-offset-1 ">
            <h3>Complete y Confirme los Libros</h3>
            <div class="form-group">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <tbody>
                            {% for libro in libros %}
                                <tr>
                                    <td class="col-md-5">
                                        <img class="img-circle miniatura" alt="imagen catalogo de {{ libro.titulo }}" src="{{ asset(libro.imagen) }}">
                                        <div class="caption">
                                          <h3>{{libro.titulo}}</h3>
                                        </div>
                                    </td>
                                    <td class="col-md-3">
                                        <script>
                                             $( "#cant{{libro.id}}" ).change(function(){
                                        </script>
                                        <div class="row">
                                            <label class="col-md-5"> Precio</label>
                                            <input id="precio" type="number" value="{{libro.precio}}" class="col-md-5 form-control"  readonly="readonly"/>
                                        </div>
                                        <div>
                                            <label>Cantidad</label>
                                            <input id="cant{{libro.id}}" type="range" class="" min="1" max="10" />
                                        </div>
                                        <label>Total</label>
                                        <output name="resultado" for="a b"></output>
                                    </td>
                                    
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
  </form>
</div>
{% endblock %}
